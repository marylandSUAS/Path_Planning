ob = [10 90 25];
obr  = [2];
nodes = [10.000000 99.487179 20.000000;
11.025641 98.974359 20.256410;
11.025641 98.461538 20.256410;
11.025641 97.948718 20.256410;
11.025641 97.435897 20.256410;
11.025641 96.923077 20.256410;
11.025641 96.410256 20.256410;
11.025641 95.897436 20.256410;
12.051282 95.384615 20.512821;
13.076923 94.871795 20.769231;
14.102564 94.358974 21.025641;
15.128205 93.846154 21.282051;
16.153846 93.333333 21.538462;
17.179487 92.820513 21.794872;
18.205128 92.307692 22.051282;
19.230769 91.794872 22.307692;
20.256410 91.282051 22.564103;
21.282051 90.769231 22.820513;
22.307692 90.256410 23.076923;
23.333333 89.743590 23.333333;
24.358974 89.230769 23.589744;
25.384615 88.717949 23.846154;
26.410256 88.205128 24.102564;
27.435897 88.205128 24.358974;
28.461538 88.205128 24.615385;
29.487179 87.692308 24.871795;
30.512821 87.179487 25.128205;
31.538462 86.666667 25.384615;
32.564103 86.153846 25.641026;
33.589744 85.641026 25.897436;
34.615385 85.128205 26.153846;
35.641026 84.615385 26.410256;
36.666667 84.102564 26.666667;
37.692308 83.589744 26.923077;
38.717949 83.076923 27.179487;
39.743590 82.564103 27.435897;
40.769231 82.564103 27.692308;
41.794872 82.051282 27.948718;
42.820513 82.051282 28.205128;
43.846154 82.051282 28.461538;
44.871795 82.051282 28.717949;
45.897436 82.051282 28.974359;
46.923077 81.538462 29.230769;
47.948718 81.025641 29.487179;
48.974359 80.512821 29.743590;
50.000000 80.000000 30.000000]
    

waypoints = nodes(1,:);
cansee = 1;
onNode = 2;
lastNode = 1;
previousNode = 1;
while(onNode <= length(nodes))
    cansee = 1;
    for i = 1:length(ob(:,1))
        if (mindistance(nodes(lastNode,:),nodes(onNode,:),ob(i,:)) < obr(i))
            cansee = 0;
        end
    end
    if (cansee == 0)
        waypoints = [waypoints; nodes(previousNode,:)];
        lastNode = previousNode;
    end
    if (onNode == length(nodes))
        waypoints = [waypoints; nodes(onNode,:)];
    end
    previousNode=previousNode+1;
    onNode=onNode+1;
end

hold on
t = linspace(0,2*pi);
for i = 1:length(ob(:,1))
    plot(ob(i,1)+obr(i)*cos(t),ob(i,2)+obr(i)*sin(t),'bl')
end
% plot([nodes(1,1) nodes(length(nodes),1)],[nodes(1,2) nodes(length(nodes),2)],'r--')
% scatter(ob(:,1),ob(:,2))
plot3(nodes(:,1),nodes(:,2),nodes(:,3),'r--')


figure;
hold on
for i = 1:length(ob(:,1))
    plot(ob(i,1)+obr(i)*cos(t),ob(i,2)+obr(i)*sin(t))
end
plot(waypoints(:,1),waypoints(:,2))
scatter(waypoints(:,1),waypoints(:,2),'r')
clear all